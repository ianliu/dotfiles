#!/bin/bash

list-sinks() {
	pactl list sinks \
		| grep '^Sink\|Description' \
		| sed 's/^Sink #\(.*\)$/\1/; s/^\s*Description: //'
}

sinks=()
idx=$(list-sinks | while read id; do
	read desc
	sinks+=($id)
	echo "$desc"
done | rofi -dmenu -format i)
sink=${sinks[$idx]}

pacmd set-default-sink "$sink"
pactl list short sink-inputs \
	| cut -f1 \
	| xargs -ISI pactl move-sink-input SI "$sink"
